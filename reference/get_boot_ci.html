<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="get_boot_ci() wraps boot and boot.ci from the boot package, uses some sensible argument values, and returns a dataframe with a confidence interval(s) and the point estimate."><title>Calculates bootstrapped confidence intervals for a statistic — get_boot_ci • ebtools</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Titillium_Web-0.4.7/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Calculates bootstrapped confidence intervals for a statistic — get_boot_ci"><meta property="og:description" content="get_boot_ci() wraps boot and boot.ci from the boot package, uses some sensible argument values, and returns a dataframe with a confidence interval(s) and the point estimate."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-CG72G9JY1V"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-CG72G9JY1V');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ebtools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ercbk/ebtools/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Calculates bootstrapped confidence intervals for a statistic</h1>
      <small class="dont-index">Source: <a href="https://github.com/ercbk/ebtools/blob/HEAD/R/get-boot-ci.R" class="external-link"><code>R/get-boot-ci.R</code></a></small>
      <div class="d-none name"><code>get_boot_ci.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>get_boot_ci()</code> wraps <code>boot</code> and <code>boot.ci</code> from the <a href="https://cran.r-project.org/web/packages/boot/index.html" class="external-link">boot</a> package, uses some sensible argument values, and returns a dataframe with a confidence interval(s) and the point estimate.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_boot_ci</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">stat_fun</span>,</span>
<span>  conf <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"bca"</span>,</span>
<span>  R <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  parallel <span class="op">=</span> <span class="st">"windows"</span>,</span>
<span>  add_boot <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  add_boot_ci <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>dataframe; Data with the variables required by the function that calculates the statistic of interest.</p></dd>


<dt>stat_fun</dt>
<dd><p>function; A function that calculates the statistic of interest.</p></dd>


<dt>conf</dt>
<dd><p>scalar or numeric vector; The confidence level(s) of the required interval(s).The default is 0.95.</p></dd>


<dt>type</dt>
<dd><p>string or character vector; A vector of character strings representing the type of intervals required. The value should be any subset of the values c("norm","basic", "stud", "perc", "bca") or simply "all" which will compute all five types of intervals. Default is "bca".</p></dd>


<dt>R</dt>
<dd><p>scalar; The number of bootstrap replicates on which the intervals are based. 1000 is the default.</p></dd>


<dt>parallel</dt>
<dd><p>string; The value that's either "windows", "other", or "no". The type of operating system determines the method of parallelization. "windows" is the default and indicates Microsoft Windows. For Mac or Linux, "other" should be used. "no" indicates calculations should not be parallelized.</p></dd>


<dt>add_boot</dt>
<dd><p>list; A list of additional argument and value pair(s) to be included in the <code>boot</code> set of arguments. See the <a href="https://cran.r-project.org/web/packages/boot/index.html" class="external-link">boot</a> package documentation for details.</p></dd>


<dt>add_boot_ci</dt>
<dd><p>list; A list of additional argument and value pair(s) to be included in the <code>boot.ci</code> set of arguments. See the <a href="https://cran.r-project.org/web/packages/boot/index.html" class="external-link">boot</a> package documentation for details.</p></dd>


<dt>...</dt>
<dd><p>Arguments and values required by 'stat_fun'</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A dataframe with the following columns:</p><ul><li><p>type: The type of confidence interval calculated</p></li>
<li><p>conf: The confidence level of the calculated intervals</p></li>
<li><p>.lower: The lower value of the confidence interval</p></li>
<li><p>.upper: The upper value of the confidence interval</p></li>
</ul><p>The point estimate of the statistic is included in the attributes of the dataframe.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <code>boot</code> and <code>boot.ci</code> functions from the boot package have a large number of options (together), and it can be a bit overwhelming when you just want some bootstrap CIs quickly. I've tried to simplify the choices with this function while also maintaining flexibility to add options for more complex cases.</p>
<p>The user must adapt the function they're using to calculate the statistic of interest ('stat_fun') to include the necessary argument according the chosen resampling option. The default resampling option is "indices" ('stype = "i"'), and it's the only one I'm going to elaborate on (See examples for "weights" option. See <a href="https://cran.r-project.org/web/packages/boot/index.html" class="external-link">boot</a> package documentation for details on the "frequency" option). In order to use this option, the user must:</p><ol><li><p>Include a index argument in their statistic function, and it must be the second argument (data argument is the first).</p></li>
<li><p>Use that argument to either subset the rows of the data or variable(s) in the body of the function.</p></li>
</ol><p>Examples below will illustrate this procedure.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Canty A, Ripley BD (2022). boot: Bootstrap R (S-Plus) Functions. R package version 1.3-28.1.</p>
<p>Davison AC, Hinkley DV (1997). Bootstrap Methods and Their Applications. Cambridge University Press, Cambridge. ISBN 0-521-57391-2, <a href="http://statwww.epfl.ch/davison/BMA/" class="external-link">http://statwww.epfl.ch/davison/BMA/</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># weights resampling option, d is the data, w is the weight</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">city</span>, package <span class="op">=</span> <span class="st">"boot"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ratio</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">d</span>, <span class="va">w</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">x</span> <span class="op">*</span> <span class="va">w</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">u</span> <span class="op">*</span> <span class="va">w</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">get_boot_ci</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">city</span>,</span></span>
<span class="r-in"><span>  stat_fun <span class="op">=</span> <span class="va">ratio</span>,</span></span>
<span class="r-in"><span>  add_boot <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>stype <span class="op">=</span> <span class="st">"w"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   type conf .lower .upper</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  bca 0.95 1.2588 2.1934</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># indices used on variable example, d is data, i is index</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">aircondit</span>, package <span class="op">=</span> <span class="st">"boot"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mean.fun</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">d</span>, <span class="va">i</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">hours</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">n</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">i</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">v</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">n</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">var</a></span><span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">hours</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">/</span><span class="va">n</span><span class="op">^</span><span class="fl">2</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">m</span>, <span class="va">v</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="fu">get_boot_ci</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">aircondit</span>,</span></span>
<span class="r-in"><span>  stat_fun <span class="op">=</span> <span class="va">mean.fun</span>,</span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   type conf  .lower  .upper</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  bca 0.95 55.8018 222.526</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># indices used on data object example</span></span></span>
<span class="r-in"><span><span class="va">movie_dat</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  movie1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">9.00</span>, <span class="fl">7.00</span>, <span class="fl">8.00</span>, <span class="fl">9.00</span>, <span class="fl">8.00</span>, <span class="fl">9.00</span>, <span class="fl">9.00</span>, <span class="fl">10.00</span>, <span class="fl">9.00</span>, <span class="fl">9.00</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  movie2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">9.00</span>, <span class="fl">6.00</span>, <span class="fl">7.00</span>, <span class="fl">8.00</span>, <span class="fl">7.00</span>, <span class="fl">9.00</span>, <span class="fl">8.00</span>, <span class="fl">8.00</span>, <span class="fl">8.00</span>, <span class="fl">7.00</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">movie_dat_long</span> <span class="op">&lt;-</span> <span class="va">movie_dat</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span> <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">movie1</span>, <span class="va">movie2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                     names_to <span class="op">=</span> <span class="st">"movies"</span>,</span></span>
<span class="r-in"><span>                     values_to <span class="op">=</span><span class="st">"ratings"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># "ind" is the index argument and is used to subset the data</span></span></span>
<span class="r-in"><span><span class="va">cles_boot</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">ind</span>, <span class="va">variable</span>, <span class="va">group</span>, <span class="va">baseline</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span><span class="va">ind</span>, <span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Select the observations for group 1</span></span></span>
<span class="r-in"><span>  <span class="va">x</span> <span class="op">&lt;-</span> <span class="va">dat</span><span class="op">[</span><span class="va">dat</span><span class="op">[[</span><span class="va">group</span><span class="op">]</span><span class="op">]</span> <span class="op">==</span> <span class="va">baseline</span>, <span class="va">variable</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Select the observations for group 2</span></span></span>
<span class="r-in"><span>  <span class="va">y</span> <span class="op">&lt;-</span> <span class="va">dat</span><span class="op">[</span><span class="va">dat</span><span class="op">[[</span><span class="va">group</span><span class="op">]</span><span class="op">]</span> <span class="op">!=</span> <span class="va">baseline</span>, <span class="va">variable</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Variances will be weighted by each group's proportion of the sample size</span></span></span>
<span class="r-in"><span>  <span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">/</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">/</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Mean difference between x and y</span></span></span>
<span class="r-in"><span>  <span class="va">diff</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Standard deviation of difference</span></span></span>
<span class="r-in"><span>  <span class="va">standardizer</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="op">(</span><span class="va">p1</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="va">p2</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">z_score</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">diff</span><span class="op">/</span><span class="va">standardizer</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Probability derived from normal distribution</span></span></span>
<span class="r-in"><span>  <span class="co"># that random x is higher than random y -</span></span></span>
<span class="r-in"><span>  <span class="co"># or in other words, that diff is larger than 0.</span></span></span>
<span class="r-in"><span>  <span class="va">prob_norm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">pnorm</a></span><span class="op">(</span><span class="va">z_score</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Return result</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">prob_norm</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">results</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>   <span class="fu">get_boot_ci</span><span class="op">(</span></span></span>
<span class="r-in"><span>     data <span class="op">=</span> <span class="va">movie_dat_long</span>,</span></span>
<span class="r-in"><span>     stat_fun <span class="op">=</span> <span class="va">cles_boot</span>,</span></span>
<span class="r-in"><span>     type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"perc"</span>, <span class="st">"bca"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>     conf <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.80</span>, <span class="fl">0.95</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>     parallel <span class="op">=</span> <span class="st">"no"</span>,</span></span>
<span class="r-in"><span>     variable <span class="op">=</span> <span class="st">"ratings"</span>,</span></span>
<span class="r-in"><span>     group <span class="op">=</span> <span class="st">"movies"</span>,</span></span>
<span class="r-in"><span>     baseline <span class="op">=</span> <span class="st">"movie1"</span></span></span>
<span class="r-in"><span>   <span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">results</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      type conf .lower .upper</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 percent 0.80 0.6527 0.9083</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 percent 0.95 0.5609 0.9605</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     bca 0.80 0.6115 0.8879</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     bca 0.95 0.5256 0.9330</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span><span class="op">$</span><span class="va">estimate</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.7870181</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Eric Book.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

